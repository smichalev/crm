(function(t){function e(e){for(var a,n,s=e[0],l=e[1],c=e[2],u=0,m=[];u<s.length;u++)n=s[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&m.push(i[n][0]),i[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],a=!0,s=1;s<r.length;s++){var l=r[s];0!==i[l]&&(a=!1)}a&&(o.splice(e--,1),t=n(n.s=r[0]))}return t}var a={},i={app:0},o=[];function n(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=a,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{staticStyle:{background:"#f1f1f1"}},[t.profile?r("v-navigation-drawer",{attrs:{clipped:t.clipped,fixed:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[r("sidebar")],1):t._e(),r("v-app-bar",{attrs:{"clipped-left":t.clippedleft,fixed:"",app:"",dense:"",color:"#177758",elevation:"0"}},[t.profile?r("v-btn",{staticClass:"d-lg-none d-xl-none mr-2",attrs:{icon:"",color:"#fff"},on:{click:function(e){e.stopPropagation(),t.rightDrawer=!t.rightDrawer}}},[r("v-icon",[t._v("mdi-menu")])],1):t._e(),r("logo"),r("v-spacer"),t.profile?r("v-toolbar-items",{staticStyle:{height:"48px"}},[r("v-menu",{attrs:{"offset-y":"",bottom:"",right:"",transition:"slide-y-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{text:"",dark:"",elevation:"0"}},a),[r("div",{staticClass:"d-sm-flex ml-2",staticStyle:{"flex-direction":"column"}},[r("div",{staticClass:"desktop"},[t._v(t._s(t.username.desktop))]),r("div",{staticClass:"mobile"},[t._v(t._s(t.username.mobile))]),r("div",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t.user_role))])]),r("v-icon",{staticClass:"desktop",attrs:{small:""}},[t._v("mdi-chevron-down")])],1)]}}],null,!1,746884598)},[r("v-list",[r("v-list-item",{on:{click:t.logout}},[r("v-list-item-title",[t._v(" Выход ")])],1)],1)],1)],1):t._e()],1),r("v-content",{staticStyle:{width:"100%"},attrs:{fluid:""}},[r("router-view")],1),t.profile?r("v-navigation-drawer",{attrs:{right:t.right,temporary:"",fixed:""},model:{value:t.rightDrawer,callback:function(e){t.rightDrawer=e},expression:"rightDrawer"}},[r("sidebar")],1):t._e()],1)},o=[],n=(r("b0c0"),r("ac1f"),r("1276"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"logotype",on:{click:t.logo}},[t._v(" crm ")])}),s=[],l={methods:{logo:function(){"/"!==this.$route.path&&this.$store.state.auth.profile&&this.$router.push("/")}}},c=l,d=(r("68aa"),r("2877")),u=Object(d["a"])(c,n,s,!1,null,"08c4c474",null),m=u.exports,v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._l(t.menu,(function(e,a){return r("div",{key:a},[e.title?r("div",{staticClass:"mt-2 mx-2",staticStyle:{"text-transform":"uppercase"}},[r("span",[t._v(t._s(e.title))])]):t._e(),r("v-list",t._l(e.item,(function(e,a){return r("v-list-item",{key:a,attrs:{to:e.to,dense:""}},[r("v-list-item-action",[r("v-icon",[t._v(t._s(e.icon))])],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:t._s(e.title)}})],1)],1)})),1)],1)})),0)},f=[],p={data:function(){return{storekeeper:{menu:[{title:"Основное меню",item:[{title:"Главная страница",icon:"mdi-server",to:"/"}]},{title:"Складской учет",item:[{title:"Список товаров",icon:"mdi-plus",to:"/productlist"}]}]},accountant:{menu:[{title:"Основное меню",item:[{title:"Главная страница",icon:"mdi-server",to:"/"}]}]},operator:{menu:[{title:"Основное меню",item:[{title:"Главная страница",icon:"mdi-server",to:"/"}]}]},route_manager:{menu:[{title:"Основное меню",item:[{title:"Главная страница",icon:"mdi-server",to:"/"}]}]},sales_manager:{menu:[{title:"Основное меню",item:[{title:"Главная страница",icon:"mdi-server",to:"/"}]}]},director:{menu:[{title:"Основное меню",item:[{title:"Главная страница",icon:"mdi-server",to:"/"}]}]},admin:{menu:[{title:"Основное меню",item:[{title:"Главная страница",icon:"mdi-server",to:"/"}]}]}}},computed:{menu:function(){return this[this.$store.state.auth.profile.role].menu}}},h=p,_=Object(d["a"])(h,v,f,!1,null,null,null),b=_.exports,g={name:"App",components:{logo:m,sidebar:b},data:function(){return{drawer:!0,clipped:!0,clippedleft:!0,right:!1,rightDrawer:!1}},mounted:function(){var t=this;return this.$http.get(this.$address+"/profile").then((function(e){e.data.profile||t.$router.push("/login"),e.data.profile&&(t.$store.commit("LOGIN",e.data.profile),t.$router.push("/"))}))},methods:{logout:function(){var t=this;return this.$http.post(this.$address+"/logout").then((function(){t.$store.commit("LOGOUT"),t.$router.push("/login")}))}},computed:{username:function(){for(var t="",e=this.$store.state.auth.profile.name.split(" "),r=0;r<e.length;r++)t+=0===r?e[r]:" "+e[r][0]+".";return{desktop:this.$store.state.auth.profile.name,mobile:t}},user_role:function(){var t=null;switch(this.$store.state.auth.profile.role){case"storekeeper":t="Кладовщик";break;case"accountant":t="Бухгалтер";break;case"operator":t="Оператор";break;case"route_manager":t="Диспетчер маршрутов";break;case"sales_manager":t="Менеджер по продажам";break;case"director":t="Директор";break;case"admin":t="Администратор";break}return t},profile:function(){return this.$store.state.auth.profile}}},x=g,y=(r("e287"),Object(d["a"])(x,i,o,!1,null,"f3b2afec",null)),k=y.exports,w=(r("99af"),r("2909")),$=r("8c4f"),C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{staticClass:"my-4 mx-4",attrs:{elevation:"0",outlined:""}},[r("v-card-title",[t._v("Добро пожаловать, "+t._s(t.$store.state.auth.profile.name)+"!")]),r("v-card-text",[t._v("Тут будет много чего интересного")])],1)},O=[],j={},S=Object(d["a"])(j,C,O,!1,null,null,null),D=S.exports,L=[{path:"/",name:"index",component:D}],I=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[r("v-card",[r("v-toolbar",{attrs:{color:"#177758",dark:"",flat:""}},[r("v-toolbar-title",[t._v("Авторизация")])],1),r("v-card-text",[t.errorList.length?r("v-alert",{attrs:{color:"error",text:"",dense:""}},t._l(t.errorList,(function(e,a){return r("div",{key:a},[t._v(" "+t._s(e)+" ")])})),0):t._e(),r("v-select",{staticClass:"mb-3",attrs:{label:"Выберите роль",items:t.roles,"item-value":"value","item-text":"name",outlined:"",dense:"","return-object":"","hide-details":"",color:"#177758"},scopedSlots:t._u([{key:"selection",fn:function(e){var r=e.item;return[t._v(" "+t._s(r.name)+" ")]}},{key:"item",fn:function(e){var r=e.item;return[t._v(" "+t._s(r.name)+" ")]}}]),model:{value:t.selectedRole,callback:function(e){t.selectedRole=e},expression:"selectedRole"}}),r("v-select",{staticClass:"mb-3",attrs:{items:t.users,label:"Выберите пользователя",outlined:"",dense:"","hide-details":"",color:"#177758",disabled:!t.selectedRole},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),r("v-text-field",{attrs:{label:"Пароль",outlined:"",dense:"",color:"#177758",type:"password","hide-details":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),r("v-divider"),r("v-card-actions",[r("v-btn",{attrs:{elevation:"0",color:"success",block:"",disabled:!t.disabledBtn},on:{click:t.authorization}},[t._v("Войти")])],1)],1)],1)],1)],1)},H=[],P={name:"index",data:function(){return{name:"",password:"",errorList:[],selectedRole:null,roles:[{value:"storekeeper",name:"Кладовщик"},{value:"accountant",name:"Бухгалтер"},{value:"operator",name:"Оператор"},{value:"route_manager",name:"Диспетчер маршрутов"},{value:"sales_manager",name:"Менеджер по продажам"},{value:"director",name:"Директор"},{value:"admin",name:"Администратор"}],users:[]}},methods:{authorization:function(){var t=this;return this.errorList=[],this.$http.post(this.$address+"/login",{name:this.name,role:this.selectedRole.value,password:this.password}).then((function(e){e.data.profile&&e.data.profile._id&&(t.$store.commit("LOGIN",e.data.profile),t.$router.push("/"))})).catch((function(e){t.name="",t.selectedRole=null,t.password="",t.errorList.push(e.response.data.error.message)}))},getUser:function(t){var e=this;return this.errorList=[],this.users=[],this.$http.get(this.$address+"/roles?role="+t).then((function(t){e.users=t.data.users})).catch((function(t){return e.errorList.push(t.response.data.error.message)}))}},watch:{selectedRole:function(t){this.getUser(t.value)}},computed:{disabledBtn:function(){return this.name.length&&this.password.length&&this.selectedRole}},mounted:function(){this.$store.state.auth.profile&&this.$router.push("/")}},R=P,T=Object(d["a"])(R,I,H,!1,null,null,null),E=T.exports,G=[{path:"/login",name:"login",component:E}],M=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-card",{staticClass:"my-4 mx-4",attrs:{elevation:"0",outlined:""}},[r("v-card-title",[r("div",[t._v("Список товаров")]),r("v-spacer"),r("v-btn",{attrs:{elevation:"0",color:"#177758",dark:""},on:{click:function(e){t.dialog=!0}}},[r("v-icon",[t._v("mdi-plus")]),t._v(" Добавить новый ")],1)],1),r("v-divider",{staticClass:"mb-0"}),r("div",{staticClass:"d-flex mx-4 my-2",staticStyle:{"align-items":"center"}},[r("v-text-field",{attrs:{label:"Поиск",outlined:"",dense:"",color:"#177758",type:"text","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),r("v-btn",{staticClass:"ml-2",attrs:{elevation:"0",color:"#177758",dark:""}},[r("v-icon",[t._v("mdi-magnify-plus-outline")]),t._v(" Поиск ")],1)],1),r("v-divider",{staticClass:"mt-0"}),r("v-card-text",[r("v-simple-table",{attrs:{"fixed-header":""},scopedSlots:t._u([{key:"default",fn:function(){return[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[t._v("Наименование ТМЦ")]),r("th",{staticClass:"text-left"},[t._v("Штрих-код")]),r("th",{staticClass:"text-left"},[t._v("Минимальный складской запас")]),r("th",{staticClass:"text-left"},[t._v("История")])])]),r("tbody",t._l(t.data,(function(e,a){return r("tr",{key:a},[r("td",[t._v(t._s(e.tmc))]),r("td",[t._v(t._s(e.barcode))]),r("td",[t._v(t._s(e.minimum_stock)+" шт.")]),r("td",[r("v-btn",{attrs:{fab:"",elevation:"0",color:"primary","x-small":""},on:{click:function(e){return t.showHistory(a)}}},[r("v-icon",[t._v("mdi-magnify-plus-outline")])],1)],1)])})),0)]},proxy:!0}])})],1)],1),r("v-dialog",{attrs:{"max-width":"580"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("div",{staticClass:"headline"},[t._v("Добавить новый товар")])]),r("v-card-text",[r("v-text-field",{staticClass:"mb-4",attrs:{label:"Наименование ТМЦ",outlined:"",dense:"",color:"#177758",type:"text","hide-details":""},model:{value:t.tmc,callback:function(e){t.tmc=e},expression:"tmc"}}),r("v-text-field",{staticClass:"my-4",attrs:{label:"Штрих-код",outlined:"",dense:"",color:"#177758",type:"text","hide-details":""},model:{value:t.barcode,callback:function(e){t.barcode=e},expression:"barcode"}}),r("v-text-field",{attrs:{label:"Минимальный складской запас, шт",outlined:"",dense:"",color:"#177758",type:"text","hide-details":""},model:{value:t.minimum_stock,callback:function(e){t.minimum_stock=e},expression:"minimum_stock"}})],1),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("div",[r("v-btn",{attrs:{elevation:"0",color:"#177758",dark:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Добавить ")]),r("v-btn",{staticClass:"ml-2",attrs:{elevation:"0",color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v(" Отмена ")])],1)],1)],1)],1),r("v-dialog",{attrs:{"max-width":"580"},model:{value:t.dialogHistory,callback:function(e){t.dialogHistory=e},expression:"dialogHistory"}},[null!==t.actionIndex?r("v-card",[r("v-card-title",[r("div",{staticClass:"headline"},[t._v("История товара: "+t._s(t.product_tmc))])]),r("v-card-text",[r("v-timeline",{attrs:{dense:""}},t._l(t.product_history,(function(e,a){return r("v-timeline-item",{key:a,attrs:{small:!0}},[r("div",[t._v(t._s(e.title))]),r("div",[t._v(t._s(e.date))])])})),1)],1),r("v-divider"),r("v-card-actions",[r("v-btn",{attrs:{elevation:"0",color:"error",block:""},on:{click:t.closeHistory}},[t._v(" Закрыть ")])],1)],1):t._e()],1)],1)},U=[],z={data:function(){return{search:"",tmc:"",barcode:"",minimum_stock:"",dialog:!1,dialogHistory:!1,actionIndex:null,data:[{tmc:"Штаны",barcode:123,minimum_stock:2,history:[{title:"Создан",date:this.randomdate(new Date(2012,0,1),new Date(2013,0,1))}]},{tmc:"Кофта",barcode:1234,minimum_stock:3,history:[{title:"Создан",date:this.randomdate(new Date(2012,0,1),new Date(2013,0,1))}]},{tmc:"Ботинки",barcode:12345,minimum_stock:4,history:[{title:"Создан",date:this.randomdate(new Date(2012,0,1),new Date(2013,0,1))},{title:"Измено наименование ТМЦ с Сапоги на Ботинки",date:this.randomdate(new Date(2014,0,1),new Date)}]}]}},methods:{randomdate:function(t,e){return new Date(t.getTime()+Math.random()*(e.getTime()-t.getTime()))},showHistory:function(t){this.actionIndex=t,this.dialogHistory=!0},closeHistory:function(){this.dialogHistory=!1,this.actionIndex=null}},computed:{product_tmc:function(){return null!==this.actionIndex?this.data[this.actionIndex].tmc:null},product_history:function(){return null!==this.actionIndex?this.data[this.actionIndex].history:null}}},N=z,B=Object(d["a"])(N,M,U,!1,null,null,null),J=B.exports,A=[{path:"/productlist",name:"productlist",component:J}];a["default"].use($["a"]);var q=new $["a"]({mode:"history",routes:[].concat(Object(w["a"])(L),Object(w["a"])(G),Object(w["a"])(A))}),F=r("2f62"),K={profile:null},Q={profile:function(t){return t.profile}},V={LOGIN:function(t,e){K.profile=e},LOGOUT:function(t){t.profile=null}},W={state:K,getters:Q,mutations:V};a["default"].use(F["a"]);var X=new F["a"].Store({modules:{auth:W}}),Y=r("ce5b"),Z=r.n(Y);r("bf40"),r("5363");a["default"].use(Z.a);var tt={},et=new Z.a(tt),rt=r("bc3a"),at=r.n(rt);at.a.defaults.withCredentials=!0;var it=at.a;r("ed18").config(),a["default"].prototype.$http=it,a["default"].prototype.$address="http://78.24.220.136:3333/api",a["default"].config.productionTip=!1,new a["default"]({router:q,store:X,vuetify:et,render:function(t){return t(k)}}).$mount("#app")},"68aa":function(t,e,r){"use strict";var a=r("d8b1"),i=r.n(a);i.a},abaf:function(t,e,r){},d8b1:function(t,e,r){},e287:function(t,e,r){"use strict";var a=r("abaf"),i=r.n(a);i.a}});
//# sourceMappingURL=app.a72a22fe.js.map